# EasyMall B2Cç”µå­å•†åŸç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

EasyMallæ˜¯ä¸€ä¸ªåŸºäºSpring Bootå¼€å‘çš„B2Cç”µå­å•†åŸç³»ç»Ÿï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›å•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€è®¢å•ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ã€‚ç³»ç»Ÿå·²å®Œæ•´å®ç°**ä¼šå‘˜ç­‰çº§ä½“ç³»**ï¼ŒåŒ…æ‹¬ç§¯åˆ†ç³»ç»Ÿã€ä¼šå‘˜æŠ˜æ‰£ã€æ¯æ—¥ç­¾åˆ°ã€ç§¯åˆ†å…‘æ¢ã€å•†å“è¯„è®ºæ”¶è—ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„è´­ç‰©ä½“éªŒã€‚

## æŠ€æœ¯æ ˆ

- åç«¯æ¡†æ¶ï¼šSpring Boot 4.0.1
- æ•°æ®åº“ï¼šMySQL 8
- ç¼“å­˜ï¼šRedisï¼ˆå•†å“æœç´¢ç»“æœç¼“å­˜ã€çƒ­é—¨/æ–°å“å•†å“ç¼“å­˜ã€ç™»å½•æ€ç¼“å­˜ï¼‰
- ORMæ¡†æ¶ï¼šMyBatis Plus
- è®¤è¯æˆæƒï¼šSpring Security + JWT
- æ–‡ä»¶å­˜å‚¨ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆå•†å“å›¾ç‰‡ã€ç”¨æˆ·å¤´åƒï¼‰
- å·¥å…·ç±»ï¼šHutoolã€FastJSON2
- æ„å»ºå·¥å…·ï¼šMaven

**æ€§èƒ½ä¼˜åŒ–**:
- å•†å“æœç´¢ä½¿ç”¨ MySQL å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXTï¼‰+ Redis ç¼“å­˜ï¼ˆ5åˆ†é’Ÿè¿‡æœŸï¼‰
- æ”¯æŒ LIKE æ¨¡ç³Šæœç´¢å’Œå…¨æ–‡æœç´¢ä¸¤ç§æ–¹å¼ï¼ŒæŒ‰ç›¸å…³æ€§æ’åº
- çƒ­é—¨å•†å“å’Œæ–°å“æ¨èä½¿ç”¨ Redis ç¼“å­˜
- å•†å“ä¿¡æ¯å˜æ›´æ—¶è‡ªåŠ¨æ¸…é™¤ç›¸å…³ç¼“å­˜

## åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ä¸ä¼šå‘˜æ¨¡å—
- ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- JWTè®¤è¯
- ä¸ªäººä¿¡æ¯ç®¡ç†
- å¯†ç ä¿®æ”¹
- **ç”¨æˆ·å¤´åƒä¸Šä¼ **
- **ä¼šå‘˜ç­‰çº§ç³»ç»Ÿ**ï¼ˆ5ä¸ªç­‰çº§ï¼šæ™®é€šã€é“œç‰Œã€é“¶ç‰Œã€é‡‘ç‰Œã€é’»çŸ³ï¼‰
- **ä¼šå‘˜ç§¯åˆ†ç³»ç»Ÿ**
  - è®¢å•å®Œæˆè·å¾—ç§¯åˆ†ï¼ˆæ¯æ¶ˆè´¹1å…ƒè·å¾—1ç§¯åˆ†ï¼‰
  - å•†å“è¯„ä»·è·å¾—ç§¯åˆ†ï¼ˆæ¯æ¬¡è¯„ä»·è·å¾—10ç§¯åˆ†ï¼‰
  - æ¯æ—¥ç­¾åˆ°è·å¾—ç§¯åˆ†ï¼ˆ5-25ç§¯åˆ†ï¼‰
- **ä¼šå‘˜æŠ˜æ‰£**ï¼ˆä¸åŒç­‰çº§äº«å—ä¸åŒæŠ˜æ‰£ï¼Œæœ€é«˜85æŠ˜ï¼‰
- **ç§¯åˆ†å…‘æ¢**ï¼ˆä½¿ç”¨ç§¯åˆ†å…‘æ¢å•†å“/ä¼˜æƒ åˆ¸ï¼‰
- **æ¯æ—¥ç­¾åˆ°**ï¼ˆè¿ç»­ç­¾åˆ°é¢å¤–å¥–åŠ±ï¼‰

### 2. å•†å“ä¸åˆ†ç±»æ¨¡å—
- å•†å“åˆ†ç±»ç®¡ç†ï¼ˆæ”¯æŒå¤šçº§åˆ†ç±»ï¼‰
- å•†å“ä¿¡æ¯å±•ç¤º
- å•†å“æœç´¢ï¼ˆåŸºäº MySQL FULLTEXT å…¨æ–‡ç´¢å¼• + Redis ç¼“å­˜ï¼‰
- çƒ­é—¨å•†å“ã€æ–°å“æ¨è
- **å•†å“å›¾ç‰‡ä¸Šä¼ **ï¼ˆæ”¯æŒå•å›¾/å¤šå›¾ä¸Šä¼ ï¼Œæ–‡ä»¶ç±»å‹éªŒè¯ï¼Œæœ¬åœ°å­˜å‚¨ï¼‰
- **å•†å“è¯„ä»·ç³»ç»Ÿ**ï¼ˆè¯„åˆ†ã€è¯„è®ºã€å›¾ç‰‡ï¼‰
- **å•†å“æ”¶è—åŠŸèƒ½**

### 3. è´­ç‰©è½¦æ¨¡å—
- æ·»åŠ å•†å“è‡³è´­ç‰©è½¦
- ä¿®æ”¹å•†å“æ•°é‡
- åˆ é™¤è´­ç‰©è½¦å•†å“
- å•†å“é€‰æ‹©/å–æ¶ˆé€‰æ‹©
- **ä¼šå‘˜æŠ˜æ‰£è‡ªåŠ¨åº”ç”¨**

### 4. è®¢å•ç®¡ç†æ¨¡å—
- åˆ›å»ºè®¢å•
- **ä¼šå‘˜æŠ˜æ‰£è‡ªåŠ¨è®¡ç®—**
- è®¢å•æ”¯ä»˜
- æŸ¥çœ‹å†å²è®¢å•
- è®¢å•çŠ¶æ€æµè½¬ï¼ˆå¾…æ”¯ä»˜â†’å·²æ”¯ä»˜â†’å·²å‘è´§â†’å·²å®Œæˆï¼‰
- **è®¢å•å®Œæˆåè‡ªåŠ¨å‘æ”¾ç§¯åˆ†**

### 5. ä¼šå‘˜ç§¯åˆ†æ¨¡å—
- **ç§¯åˆ†è·å–**
  - è®¢å•å®Œæˆï¼šæ¶ˆè´¹é‡‘é¢ Ã— 1
  - å•†å“è¯„ä»·ï¼š10ç§¯åˆ†/æ¬¡
  - æ¯æ—¥ç­¾åˆ°ï¼š5-25ç§¯åˆ†ï¼ˆè¿ç»­ç­¾åˆ°é¢å¤–å¥–åŠ±ï¼‰
- **ç§¯åˆ†æ¶ˆè€—**
  - ç§¯åˆ†å…‘æ¢å•†å“
  - ç§¯åˆ†å…‘æ¢ä¼˜æƒ åˆ¸
- **ç§¯åˆ†è®°å½•**ï¼šå®Œæ•´çš„ç§¯åˆ†å˜åŠ¨å†å²æŸ¥è¯¢
- **ä¼šå‘˜ç­‰çº§**ï¼šæ ¹æ®ç§¯åˆ†è‡ªåŠ¨å‡çº§

### 6. è¯„è®ºä¸æ”¶è—æ¨¡å—
- **å•†å“è¯„è®º**
  - è¯„è®ºå•†å“ï¼ˆéœ€è®¢å•å®Œæˆåï¼‰
  - è¯„åˆ†ï¼ˆ1-5æ˜Ÿï¼‰
  - ä¸Šä¼ è¯„è®ºå›¾ç‰‡
  - æŸ¥çœ‹å•†å“è¯„è®ºåˆ—è¡¨
  - å•†å®¶å›å¤åŠŸèƒ½
- **å•†å“æ”¶è—**
  - æ·»åŠ /å–æ¶ˆæ”¶è—
  - æ”¶è—åˆ—è¡¨ç®¡ç†
  - æ”¶è—çŠ¶æ€æŸ¥è¯¢

### 7. ä¼˜æƒ åˆ¸æ¨¡å—
- **ä¼˜æƒ åˆ¸ç±»å‹**
  - å›ºå®šé‡‘é¢åˆ¸ï¼ˆæ»¡å‡åˆ¸ï¼‰ï¼šæ»¡100å‡10
  - ç™¾åˆ†æ¯”æŠ˜æ‰£åˆ¸ï¼ˆæŠ˜æ‰£åˆ¸ï¼‰ï¼š85æŠ˜ä¼˜æƒ åˆ¸
  - æ–°äººä¸“äº«åˆ¸ï¼šæ³¨å†Œè‡ªåŠ¨å‘æ”¾
  - ä¼šå‘˜ä¸“å±åˆ¸ï¼šä¼šå‘˜å‡çº§è‡ªåŠ¨å‘æ”¾
- **é¢†å–æ–¹å¼**
  - ç”¨æˆ·ä¸»åŠ¨é¢†å–ï¼ˆä¼˜æƒ åˆ¸ä¸­å¿ƒï¼‰
  - ç§¯åˆ†å…‘æ¢ä¼˜æƒ åˆ¸
  - ç³»ç»Ÿè‡ªåŠ¨å‘æ”¾ï¼ˆæ–°äººæ³¨å†Œã€ä¼šå‘˜å‡çº§ï¼‰
- **ä½¿ç”¨è§„åˆ™**
  - æ¯ç¬”è®¢å•é™ç”¨ä¸€å¼ ä¼˜æƒ åˆ¸
  - ä¼˜æƒ åˆ¸åœ¨ä¼šå‘˜æŠ˜æ‰£åçš„é‡‘é¢åŸºç¡€ä¸Šè®¡ç®—
  - è®¢å•å–æ¶ˆè‡ªåŠ¨è¿”è¿˜ä¼˜æƒ åˆ¸
  - æ”¯æŒä½¿ç”¨é—¨æ§›ã€ä¼šå‘˜ç­‰çº§é™åˆ¶ã€æœ‰æ•ˆæœŸç­‰é…ç½®

### 8. åå°ç®¡ç†æ¨¡å—

#### ç®¡ç†å‘˜æƒé™
- æ‰€æœ‰åå°æ¥å£éœ€è¦ç®¡ç†å‘˜è§’è‰²ï¼ˆ`ROLE_ADMIN`ï¼‰
- ä½¿ç”¨ `@PreAuthorize("hasRole('ADMIN')")` æ³¨è§£è¿›è¡Œæƒé™æ§åˆ¶

#### å•†å“ç®¡ç†
- å•†å“åˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒåç§°ã€åˆ†ç±»ã€çŠ¶æ€ç­›é€‰ï¼‰
- å•†å“è¯¦æƒ…æŸ¥è¯¢
- æ–°å¢/ä¿®æ”¹å•†å“
- å•†å“ä¸Šæ¶/ä¸‹æ¶
- åº“å­˜ç®¡ç†
- åˆ é™¤å•†å“

#### è®¢å•ç®¡ç†
- è®¢å•åˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒè®¢å•å·ã€ç”¨æˆ·ã€çŠ¶æ€ç­›é€‰ï¼‰
- è®¢å•è¯¦æƒ…æŸ¥è¯¢
- è®¢å•çŠ¶æ€ä¿®æ”¹
- å–æ¶ˆè®¢å•

#### ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·åˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒç”¨æˆ·åã€æ‰‹æœºã€çŠ¶æ€ã€è§’è‰²ç­›é€‰ï¼‰
- ç”¨æˆ·è¯¦æƒ…æŸ¥è¯¢
- ç”¨æˆ·çŠ¶æ€å¯ç”¨/ç¦ç”¨
- ç”¨æˆ·è§’è‰²ç®¡ç†
- ç§¯åˆ†è°ƒæ•´

#### è¯„è®ºå®¡æ ¸
- è¯„è®ºåˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒå•†å“ã€ç”¨æˆ·ã€çŠ¶æ€ã€è¯„åˆ†ç­›é€‰ï¼‰
- è¯„è®ºè¯¦æƒ…æŸ¥è¯¢
- å®¡æ ¸é€šè¿‡/æ‹’ç»
- å•†å®¶å›å¤
- åˆ é™¤è¯„è®º

#### ä¼šå‘˜ç­‰çº§ç®¡ç†
- ç­‰çº§é…ç½®åˆ—è¡¨
- æ–°å¢/ä¿®æ”¹/åˆ é™¤ç­‰çº§
- ç­‰çº§çŠ¶æ€ç®¡ç†

#### åˆ†ç±»ç®¡ç†
- åˆ†ç±»åˆ†é¡µæŸ¥è¯¢
- æ–°å¢/ä¿®æ”¹/åˆ é™¤åˆ†ç±»
- åˆ†ç±»çŠ¶æ€ç®¡ç†

#### ç§¯åˆ†å…‘æ¢å•†å“ç®¡ç†
- å…‘æ¢å•†å“åˆ—è¡¨
- æ–°å¢/ä¿®æ”¹/åˆ é™¤å…‘æ¢å•†å“
- å•†å“ä¸Šæ¶/ä¸‹æ¶
- åº“å­˜ç®¡ç†

## é¡¹ç›®ç»“æ„

```
src/main/java/org/ruikun/
â”œâ”€â”€ config          # é…ç½®ç±»
â”‚   â””â”€â”€ RedisConfig.java    # Redis é…ç½®ï¼ˆSpring Boot 4.x å…¼å®¹ï¼‰
â”œâ”€â”€ controller      # æ§åˆ¶å±‚
â”‚   â”œâ”€â”€ UserAuthController.java   # ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
â”‚   â”œâ”€â”€ ProductController.java    # å•†å“æ¥å£
â”‚   â”œâ”€â”€ OrderController.java      # è®¢å•æ¥å£
â”‚   â”œâ”€â”€ CommentController.java    # è¯„è®ºæ¥å£
â”‚   â”œâ”€â”€ FavoriteController.java   # æ”¶è—æ¥å£
â”‚   â”œâ”€â”€ MemberController.java     # ä¼šå‘˜æ¥å£
â”‚   â”œâ”€â”€ PointsController.java     # ç§¯åˆ†æ¥å£
â”‚   â”œâ”€â”€ SignInController.java     # ç­¾åˆ°æ¥å£
â”‚   â”œâ”€â”€ PointsExchangeController.java  # ç§¯åˆ†å…‘æ¢æ¥å£
â”‚   â””â”€â”€ admin              # åå°ç®¡ç†æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ AdminProductController.java    # å•†å“ç®¡ç†
â”‚       â”œâ”€â”€ AdminOrderController.java      # è®¢å•ç®¡ç†
â”‚       â”œâ”€â”€ AdminUserController.java       # ç”¨æˆ·ç®¡ç†
â”‚       â”œâ”€â”€ AdminCommentController.java    # è¯„è®ºå®¡æ ¸
â”‚       â”œâ”€â”€ AdminMemberLevelController.java # ä¼šå‘˜ç­‰çº§ç®¡ç†
â”‚       â”œâ”€â”€ AdminCategoryController.java   # åˆ†ç±»ç®¡ç†
â”‚       â””â”€â”€ AdminPointsProductController.java # ç§¯åˆ†å…‘æ¢å•†å“ç®¡ç†
â”œâ”€â”€ dto             # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ entity          # å®ä½“ç±»
â”œâ”€â”€ exception       # å¼‚å¸¸å¤„ç†
â”œâ”€â”€ mapper          # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ security        # å®‰å…¨é…ç½®
â”œâ”€â”€ service         # ä¸šåŠ¡å±‚
â”‚   â””â”€â”€ impl        # ä¸šåŠ¡å±‚å®ç°
â”œâ”€â”€ utils           # å·¥å…·ç±»
â”œâ”€â”€ vo              # è§†å›¾å¯¹è±¡
â””â”€â”€ common          # å…¬å…±ç±»

src/main/resources/
â”œâ”€â”€ mapper          # MyBatisæ˜ å°„æ–‡ä»¶
â”œâ”€â”€ static          # é™æ€èµ„æº
â”œâ”€â”€ templates       # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ application.yml # åº”ç”¨é…ç½®
â””â”€â”€ db/migration    # æ•°æ®åº“è¿ç§»è„šæœ¬
    â”œâ”€â”€ V1__Create_initial_tables.sql      # åŸºç¡€è¡¨ç»“æ„
    â”œâ”€â”€ V2__Create_member_tables.sql       # ä¼šå‘˜ç›¸å…³è¡¨
    â”œâ”€â”€ V3__Create_points_exchange_tables.sql # ç§¯åˆ†å…‘æ¢è¡¨
    â”œâ”€â”€ V4__Add_fulltext_search_index.sql  # å…¨æ–‡ç´¢å¼•
    â””â”€â”€ test-data.sql                      # æµ‹è¯•æ•°æ®
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 17
- MySQL 8.0+
- Redis 6.0+
- Maven 3.6+

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/yunluoxincheng/EasyMall.git
   cd EasyMall
   ```

2. **é…ç½®æ•°æ®åº“**
   - åˆ›å»ºæ•°æ®åº“ `easymall`
   - æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š`src/main/resources/db/migration/V1__Create_initial_tables.sql`

3. **ä¿®æ”¹é…ç½®æ–‡ä»¶**
   ç¼–è¾‘ `src/main/resources/application.yml`ï¼Œä¿®æ”¹æ•°æ®åº“å’ŒRedisè¿æ¥ä¿¡æ¯ï¼š
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/easymall?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=UTC
       username: your_username
       password: your_password
     redis:
       host: localhost
       port: 6379
   ```

4. **å¯åŠ¨é¡¹ç›®**
   ```bash
   mvn spring-boot:run
   ```

5. **è®¿é—®æ¥å£**
   - æ¥å£åœ°å€ï¼šhttp://localhost:8080/api
   - é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼šadmin/admin123

### Docker å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰

ä½¿ç”¨ Docker å¯ä»¥å¿«é€Ÿæ­å»ºå®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£… MySQLã€Redis ç­‰ä¾èµ–ã€‚

**ç¯å¢ƒè¦æ±‚**
- Docker Engine 20.10+
- Docker Compose 2.0+

**å¿«é€Ÿå¯åŠ¨**

1. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**
   ```bash
   # ä½¿ç”¨ docker-compose å¯åŠ¨ï¼ˆåŸºç¡€æ¨¡å¼ï¼‰
   docker-compose up -d

   # æˆ–ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆå¯ç”¨ä»£ç çƒ­é‡è½½ï¼‰
   docker-compose -f docker-compose.yml -f docker-dev.yml up -d
   ```

2. **æŸ¥çœ‹æœåŠ¡çŠ¶æ€**
   ```bash
   docker-compose ps
   ```

3. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**
   ```bash
   # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
   docker-compose logs -f

   # ä»…æŸ¥çœ‹åº”ç”¨æ—¥å¿—
   docker-compose logs -f easymall-app
   ```

4. **åœæ­¢æ‰€æœ‰æœåŠ¡**
   ```bash
   docker-compose stop

   # åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆæ¸…ç©ºæ•°æ®åº“æ•°æ®ï¼‰
   docker-compose down -v
   ```

**æœåŠ¡è¯´æ˜**

| æœåŠ¡ | å®¹å™¨å | ç«¯å£æ˜ å°„ | è¯´æ˜ |
|------|--------|----------|------|
| EasyMall åº”ç”¨ | easymall-app | 8080:8080 | Spring Boot åº”ç”¨ |
| MySQL | easymall-mysql | 3306:3306 | æ•°æ®åº“ |
| Redis | easymall-redis | 6379:6379 | ç¼“å­˜ |

**ä»£ç çƒ­é‡è½½**

å¼€å‘æ¨¡å¼æ”¯æŒä»£ç çƒ­é‡è½½ï¼Œä¿®æ”¹ `src` ç›®å½•ä¸‹çš„ä»£ç ä¼šè‡ªåŠ¨è§¦å‘åº”ç”¨é‡å¯ï¼š

1. **å¯åŠ¨å¼€å‘æ¨¡å¼**
   ```bash
   docker-compose -f docker-compose.yml -f docker-dev.yml up -d
   ```

2. **å·æŒ‚è½½è¯´æ˜**
   - `./src:/app/src` - æºä»£ç ç›®å½•
   - `./pom.xml:/app/pom.xml` - Maven é…ç½®æ–‡ä»¶
   - `${HOME}/.m2:/root/.m2` - Maven ä»“åº“ç¼“å­˜
   - `./uploads:/data/easymall/uploads` - å›¾ç‰‡å­˜å‚¨ç›®å½•

3. **çƒ­é‡è½½è§¦å‘æ¡ä»¶**
   - ä¿®æ”¹ Java æºä»£ç 
   - ä¿®æ”¹é…ç½®æ–‡ä»¶
   - ä¿®æ”¹ pom.xml

4. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   docker-compose logs -f easymall-app
   ```

5. **æ‰‹åŠ¨é‡å¯**ï¼ˆå¦‚éœ€è¦ï¼‰
   ```bash
   docker-compose restart easymall-app
   ```

**ç¯å¢ƒé…ç½®**

å¯é€šè¿‡ `.env` æ–‡ä»¶è‡ªå®šä¹‰é…ç½®ï¼š

```bash
# åº”ç”¨ç«¯å£
APP_PORT=8080

# MySQL é…ç½®
MYSQL_PORT=3306
MYSQL_PASSWORD=123456

# Redis é…ç½®
REDIS_PORT=6379
```

**å¸¸è§é—®é¢˜**

1. **Maven ä¾èµ–ä¸‹è½½ç¼“æ…¢**
   - é¦–æ¬¡å¯åŠ¨ä¼šä¸‹è½½ä¾èµ–ï¼Œè¯·è€å¿ƒç­‰å¾…
   - ä¾èµ–ä¼šç¼“å­˜åˆ°å®¿ä¸»æœº `~/.m2` ç›®å½•ï¼Œåç»­å¯åŠ¨æ›´å¿«

2. **ç«¯å£å†²çª**
   - ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ç«¯å£é…ç½®
   - æˆ–å…³é—­å ç”¨ç«¯å£çš„æœåŠ¡

**æ•°æ®åº“åˆå§‹åŒ–**

ä½¿ç”¨ Docker é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ï¼ˆä½äº `src/main/resources/db/migration/` ç›®å½•ï¼‰ï¼ŒåŒ…æ‹¬ï¼š

- è¡¨ç»“æ„åˆ›å»ºï¼ˆV1ã€V2ã€V3ã€V4ï¼‰
- æµ‹è¯•æ•°æ®å¯¼å…¥ï¼ˆtest-data.sqlï¼‰

æ‰€æœ‰è¡¨å’Œå­—æ®µå‡ä½¿ç”¨ **utf8mb4** å­—ç¬¦é›†ï¼Œç¡®ä¿ä¸­æ–‡æ•°æ®æ­£å¸¸å­˜å‚¨ã€‚

**é‡æ–°åˆå§‹åŒ–æ•°æ®åº“**

å¦‚éœ€æ¸…ç©ºæ•°æ®é‡æ–°åˆå§‹åŒ–ï¼š

```bash
# åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨å’Œæ•°æ®å·
docker-compose -f docker-compose.yml -f docker-dev.yml down -v

# é‡æ–°å¯åŠ¨ï¼ˆè‡ªåŠ¨åˆå§‹åŒ–ï¼‰
docker-compose -f docker-compose.yml -f docker-dev.yml up -d
```

## APIæ¥å£æ–‡æ¡£

è¯¦ç»†çš„ API æ¥å£æ–‡æ¡£è¯·æŸ¥çœ‹: [docs/API.md](docs/API.md)

### ä¸»è¦æ¥å£æ¨¡å—

#### ç”¨æˆ·æ¨¡å—
- POST /api/user/login - ç”¨æˆ·ç™»å½•
- POST /api/user/register - ç”¨æˆ·æ³¨å†Œ
- GET /api/user/info - è·å–ç”¨æˆ·ä¿¡æ¯
- PUT /api/user/password - ä¿®æ”¹å¯†ç 

#### å•†å“æ¨¡å—
- GET /api/product/page - å•†å“åˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒå…³é”®è¯æœç´¢ï¼‰
- GET /api/product/{id} - å•†å“è¯¦æƒ…
- GET /api/product/hot - çƒ­é—¨å•†å“
- GET /api/product/new - æ–°å“æ¨è

#### è®¢å•æ¨¡å—
- POST /api/order/create - åˆ›å»ºè®¢å•ï¼ˆè‡ªåŠ¨åº”ç”¨ä¼šå‘˜æŠ˜æ‰£ï¼‰
- GET /api/order/page - è®¢å•åˆ—è¡¨
- PUT /api/order/{orderId}/pay - æ”¯ä»˜è®¢å•

#### ä¼šå‘˜æ¨¡å—
- GET /api/member/level - è·å–ä¼šå‘˜ç­‰çº§
- GET /api/member/discount - è·å–ä¼šå‘˜æŠ˜æ‰£

#### ä¼˜æƒ åˆ¸æ¨¡å—ï¼ˆç”¨æˆ·ç«¯ï¼‰
- GET /api/coupon/templates - è·å–å¯é¢†å–çš„ä¼˜æƒ åˆ¸åˆ—è¡¨
- POST /api/coupon/receive/{templateId} - é¢†å–ä¼˜æƒ åˆ¸
- GET /api/coupon/my - æŸ¥çœ‹æˆ‘çš„ä¼˜æƒ åˆ¸åˆ—è¡¨
- GET /api/coupon/available - è·å–å¯ç”¨ä¼˜æƒ åˆ¸ï¼ˆä¸‹å•æ—¶ï¼‰
- POST /api/coupon/calculate - è®¡ç®—ä¼˜æƒ é‡‘é¢

#### ä¼˜æƒ åˆ¸æ¨¡å—ï¼ˆç®¡ç†ç«¯ï¼‰
- GET /api/admin/coupon/templates - æŸ¥è¯¢ä¼˜æƒ åˆ¸æ¨¡æ¿åˆ—è¡¨
- POST /api/admin/coupon/template - åˆ›å»ºä¼˜æƒ åˆ¸æ¨¡æ¿
- PUT /api/admin/coupon/template - æ›´æ–°ä¼˜æƒ åˆ¸æ¨¡æ¿
- PUT /api/admin/coupon/template/{id}/status - ä¸Šä¸‹æ¶ä¼˜æƒ åˆ¸
- DELETE /api/admin/coupon/template/{id} - åˆ é™¤ä¼˜æƒ åˆ¸æ¨¡æ¿
- GET /api/admin/coupon/usage-logs - æŸ¥è¯¢ä¼˜æƒ åˆ¸ä½¿ç”¨è®°å½•

#### å›¾ç‰‡ä¸Šä¼ æ¨¡å—
- POST /api/upload/image - å•å›¾ä¸Šä¼ ï¼ˆå•†å“å›¾ç‰‡/ç”¨æˆ·å¤´åƒï¼‰
- POST /api/upload/images - å¤šå›¾ä¸Šä¼ ï¼ˆä»…å•†å“å›¾ç‰‡ï¼‰
- DELETE /api/upload/image - åˆ é™¤å›¾ç‰‡ï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰

#### åå°ç®¡ç†æ¨¡å—ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
- GET /api/admin/products - å•†å“ç®¡ç†
- GET /api/admin/orders - è®¢å•ç®¡ç†
- GET /api/admin/users - ç”¨æˆ·ç®¡ç†
- GET /api/admin/comments - è¯„è®ºå®¡æ ¸
- GET /api/admin/member-levels - ä¼šå‘˜ç­‰çº§ç®¡ç†

> æ›´å¤šæ¥å£è¯¦æƒ…è¯·æŸ¥çœ‹ [docs/API.md](docs/API.md)
>
> å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è¯¦ç»†ä½¿ç”¨æŒ‡å—: [docs/image-upload-guide.md](docs/image-upload-guide.md)

## éƒ¨ç½²è¯´æ˜

### æœ¬åœ°éƒ¨ç½²
1. æ‰“åŒ…é¡¹ç›®ï¼š`mvn clean package`
2. è¿è¡ŒjaråŒ…ï¼š`java -jar target/EasyMall-0.0.1-SNAPSHOT.jar`

### Docker éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

> ğŸ“˜ **è¯¦ç»†çš„äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—**: æŸ¥çœ‹ [Docker äº‘æœåŠ¡å™¨éƒ¨ç½²æ–‡æ¡£](docs/cloud-deployment.md)

é¡¹ç›®æä¾›å¤šç§ Docker éƒ¨ç½²æ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨é¢„åˆå§‹åŒ–çš„ MySQL é•œåƒï¼Œè‡ªåŠ¨å®Œæˆæ•°æ®åº“åˆå§‹åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ SQL æ–‡ä»¶ã€‚

```bash
# 1. æ‹‰å–é•œåƒ
docker pull yunluoxincheng/easymall:latest
docker pull yunluoxincheng/easymall-mysql:init
docker pull redis:7-alpine

# 2. åˆ›å»ºç½‘ç»œ
docker network create easymall-net

# 3. å¯åŠ¨ MySQLï¼ˆè‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“ï¼‰
docker run -d `
  --name easymall-mysql `
  --network easymall-net `
  -e MYSQL_ROOT_PASSWORD=123456 `
  -e MYSQL_DATABASE=easymall `
  -e TZ=Asia/Shanghai `
  yunluoxincheng/easymall-mysql:init

# 4. ç­‰å¾… 30-60 ç§’è®©æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ

# 5. å¯åŠ¨ Redis
docker run -d --name easymall-redis --network easymall-net redis:7-alpine

# 6. å¯åŠ¨åº”ç”¨
docker run -d `
  --name easymall-app `
  --network easymall-net `
  -p 8080:8080 `
  -v /root/EasyMall/uploads:/data/easymall/uploads `
  -e SPRING_DATASOURCE_URL="jdbc:mysql://easymall-mysql:3306/easymall?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC" `
  -e SPRING_DATASOURCE_USERNAME=root `
  -e SPRING_DATASOURCE_PASSWORD=123456 `
  -e SPRING_DATA_REDIS_HOST=easymall-redis `
  -e SPRING_DATA_REDIS_PORT=6379 `
  yunluoxincheng/easymall:latest

# 7. éªŒè¯éƒ¨ç½²
curl http://localhost:8080/api/public/products
```

**ç‰¹ç‚¹**ï¼š
- âœ… é¢„åˆå§‹åŒ– MySQL é•œåƒï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ SQL
- âœ… å¯åŠ¨å³ç”¨ï¼Œå¿«é€Ÿéƒ¨ç½²
- âœ… é€‚åˆäº‘æœåŠ¡å™¨éƒ¨ç½²
- âœ… æ”¯æŒ Volume æŒ‚è½½å›¾ç‰‡å­˜å‚¨ç›®å½•

**æ³¨æ„**ï¼šé¦–æ¬¡è¿è¡Œå‰éœ€åˆ›å»ºå›¾ç‰‡å­˜å‚¨ç›®å½•ï¼š
```bash
mkdir -p /root/EasyMall/uploads
chmod 755 /root/EasyMall/uploads
```

#### æ–¹å¼äºŒï¼šæ ‡å‡†éƒ¨ç½²

ä½¿ç”¨å®˜æ–¹ MySQL é•œåƒï¼Œéœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–æ•°æ®åº“ã€‚

```bash
# 1. æ‹‰å–é•œåƒ
docker pull yunluoxincheng/easymall:latest
docker pull mysql:8.0
docker pull redis:7-alpine

# 2. åˆ›å»ºç½‘ç»œ
docker network create easymall-net

# 3. å¯åŠ¨ MySQLï¼ˆéœ€æ‰‹åŠ¨å¯¼å…¥æ•°æ®åº“ï¼‰
docker run -d \
  --name easymall-mysql \
  --network easymall-net \
  -e MYSQL_ROOT_PASSWORD=123456 \
  -e MYSQL_DATABASE=easymall \
  -e TZ=Asia/Shanghai \
  mysql:8.0

# 4. æ‰‹åŠ¨å¯¼å…¥æ•°æ®åº“è„šæœ¬ï¼ˆè¯¦è§éƒ¨ç½²æ–‡æ¡£ï¼‰
# ä½¿ç”¨ WinSCP æˆ– scp ä¸Šä¼  migration ç›®å½•ä¸‹çš„ SQL æ–‡ä»¶

# 5-7. åŒæ–¹å¼ä¸€
```

#### æ›´å¤šéƒ¨ç½²é€‰é¡¹

- ğŸ“˜ **å®Œæ•´éƒ¨ç½²æŒ‡å—**: [docs/cloud-deployment.md](docs/cloud-deployment.md)
  - æ„å»ºå’Œæ¨é€åº”ç”¨é•œåƒ
  - å¿«é€Ÿéƒ¨ç½²ï¼ˆé¢„åˆå§‹åŒ– MySQLï¼‰
  - WinSCP å›¾å½¢åŒ–ä¸Šä¼ æ–¹æ³•
  - å‘½ä»¤è¡Œéƒ¨ç½²è¯¦ç»†æ­¥éª¤
  - æ•…éšœæ’æŸ¥æŒ‡å—
  - æ•°æ®å¤‡ä»½æ¢å¤
  - é˜²ç«å¢™é…ç½®

#### æ„å»ºå’Œæ¨é€é•œåƒ

å¦‚æœéœ€è¦ä»æºä»£ç æ„å»ºåº”ç”¨é•œåƒï¼š

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/yunluoxincheng/EasyMall.git
cd EasyMall

# 2. ç™»å½• Docker Hub
docker login

# 3. ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ Dockerfile æ„å»ºé•œåƒ
docker build -f Dockerfile.production -t yunluoxincheng/easymall:latest .

# 4. æ¨é€åˆ° Docker Hub
docker push yunluoxincheng/easymall:latest
```

**æ„å»ºè¯´æ˜**ï¼š
- ä½¿ç”¨ `-f Dockerfile.production` æŒ‡å®šç”Ÿäº§ç¯å¢ƒ Dockerfile
- å¤šé˜¶æ®µæ„å»ºï¼Œæœ€ç»ˆé•œåƒåªåŒ…å« JRE å’Œ jar åŒ…ï¼Œä½“ç§¯æ›´å°
- ä½¿ç”¨ Alpine åŸºç¡€é•œåƒå’Œé root ç”¨æˆ·è¿è¡Œï¼Œå®‰å…¨æ€§æ›´é«˜

è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ï¼š[æ„å»ºå’Œæ¨é€é•œåƒ](docs/cloud-deployment.md#æ„å»ºå’Œæ¨é€åº”ç”¨é•œåƒå¯é€‰)

#### ç”Ÿäº§ç‰ˆ Dockerfile ç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| å¤šé˜¶æ®µæ„å»º | æ„å»ºå’Œè¿è¡Œåˆ†ç¦»ï¼Œæœ€ç»ˆé•œåƒåªåŒ…å« JRE å’Œ jar åŒ… |
| é•œåƒä½“ç§¯ | ä½¿ç”¨ Alpine åŸºç¡€é•œåƒï¼Œä½“ç§¯æ›´å° |
| å®‰å…¨æ€§ | ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œåº”ç”¨ |
| æ—¶åŒºè®¾ç½® | é¢„è®¾ä¸ºä¸Šæµ·æ—¶åŒº |
| JVM ä¼˜åŒ– | æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰ JVM å‚æ•° |

## å¾…å®Œå–„åŠŸèƒ½

- [ ] æ”¯ä»˜æ¥å£é›†æˆï¼ˆæ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜ï¼‰
- [ ] ä¼šå‘˜ç”Ÿæ—¥ç¤¼åŒ…è‡ªåŠ¨å‘æ”¾
- [ ] ç§¯åˆ†æœ‰æ•ˆæœŸç®¡ç†
- [ ] ä¼šå‘˜ä¸“å±æ´»åŠ¨

## ä¼šå‘˜ç­‰çº§ä¸æƒç›Šè¯´æ˜

### ä¼šå‘˜ç­‰çº§

| ç­‰çº§ | åç§° | ç§¯åˆ†èŒƒå›´ | æŠ˜æ‰£ |
|------|------|----------|------|
| 1 | æ™®é€šä¼šå‘˜ | 0-999 | æ— æŠ˜æ‰£ |
| 2 | é“œç‰Œä¼šå‘˜ | 1000-4999 | 98æŠ˜ |
| 3 | é“¶ç‰Œä¼šå‘˜ | 5000-19999 | 95æŠ˜ |
| 4 | é‡‘ç‰Œä¼šå‘˜ | 20000-49999 | 9æŠ˜ |
| 5 | é’»çŸ³ä¼šå‘˜ | 50000+ | 85æŠ˜ |

### ç§¯åˆ†è·å–è§„åˆ™

| è·å–æ–¹å¼ | ç§¯åˆ†å€¼ | è¯´æ˜ |
|---------|-------|------|
| è®¢å•å®Œæˆ | è®¢å•é‡‘é¢Ã—1 | æ¯æ¶ˆè´¹1å…ƒè·å¾—1ç§¯åˆ† |
| å•†å“è¯„ä»· | 10ç§¯åˆ† | æ¯æ¬¡è¯„ä»·è·å¾—10ç§¯åˆ† |
| æ¯æ—¥ç­¾åˆ° | 5-25ç§¯åˆ† | åŸºç¡€5åˆ†ï¼Œè¿ç»­ç­¾åˆ°é¢å¤–å¥–åŠ± |

### ç­¾åˆ°ç§¯åˆ†è§„åˆ™

- åŸºç¡€ç§¯åˆ†ï¼š5ç§¯åˆ†/å¤©
- è¿ç»­ç­¾åˆ°ç¬¬3å¤©ï¼šé¢å¤–+5ç§¯åˆ†
- è¿ç»­ç­¾åˆ°ç¬¬4å¤©ï¼šé¢å¤–+10ç§¯åˆ†
- è¿ç»­ç­¾åˆ°ç¬¬5å¤©ï¼šé¢å¤–+15ç§¯åˆ†
- è¿ç»­ç­¾åˆ°ç¬¬6å¤©åŠä»¥ä¸Šï¼šé¢å¤–+20ç§¯åˆ†

### ç§¯åˆ†å…‘æ¢å•†å“ç¤ºä¾‹

- 100å…ƒä¼˜æƒ åˆ¸ - 500ç§¯åˆ†
- ç²¾ç¾å®šåˆ¶æ°´æ¯ - 2000ç§¯åˆ†
- è“ç‰™è€³æœº - 5000ç§¯åˆ†
- æ™ºèƒ½æ‰‹è¡¨ - 10000ç§¯åˆ†

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥å¸®åŠ©å®Œå–„é¡¹ç›®ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚