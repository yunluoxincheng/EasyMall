# 提案：更新文档以反映图片上传功能

## 元数据

- **ID**: update-documentation-for-image-upload
- **标题**: 更新 README 和相关文档以反映已实现的图片上传功能
- **类型**: 文档更新
- **状态**: 草案
- **创建日期**: 2026-01-04
- **优先级**: 中

## 背景

EasyMall 系统已成功实现了图片上传和存储功能（image-upload-and-storage），但现有文档（特别是 README.md）未能反映这一新增功能。目前存在以下问题：

1. README.md 的"待完善功能"中列出了"商品图片上传（MinIO）"，但实际已实现了本地存储的图片上传功能
2. 图片上传功能未在主要功能模块部分进行说明
3. API 接口文档可能未包含图片上传相关接口
4. 部署文档未说明图片存储目录的配置要求

## 目标

本提案旨在更新项目文档，确保：

1. README 准确反映已实现的功能
2. 图片上传功能在功能模块中有完整说明
3. API 文档包含图片上传接口
4. 部署文档说明图片存储配置
5. 用户提供清晰的图片上传使用指南

## 影响范围

### 受影响的文档

1. **README.md**（主文档）
   - 从"待完善功能"中移除图片上传
   - 在功能模块中添加图片上传说明
   - 更新技术栈说明

2. **docs/API.md**（API 文档）
   - 添加图片上传接口说明
   - 包含请求/响应示例

3. **docs/deployment-guide.md**（部署指南）
   - 添加图片存储目录配置说明
   - 说明 Nginx 静态文件服务配置

4. **docker-compose.yml**
   - 确认 uploads 目录的 volume 挂载配置

### 不受影响的内容

- 业务逻辑代码（不修改实现）
- 数据库结构
- 现有功能行为

## 设计决策

### 文档更新策略

1. **准确性优先**：文档严格反映已实现的功能，不描述未实现的内容
2. **用户友好**：提供清晰的使用示例和说明
3. **完整性**：涵盖功能描述、API 说明、部署配置

### 图片功能定位

- 实现方式：本地文件系统存储（非 MinIO）
- 存储位置：`/data/easymall/uploads/` 目录
- 支持类型：商品图片、用户头像
- 安全机制：文件类型验证、大小限制、魔数检查

## 风险与注意事项

1. **文档一致性**：确保所有文档描述与实际实现一致
2. **配置完整性**：部署文档必须包含所有必要的配置步骤
3. **示例准确性**：代码示例必须经过验证

## 相关依赖

- 依赖 `image-upload-and-storage` 规范（已归档）
- 依赖 `cloud-deployment-guide` 规范（可能需要更新）

## 验收标准

1. README 不再将图片上传列为"待完善功能"
2. 功能模块部分包含图片上传功能说明
3. API 文档包含完整的图片上传接口说明
4. 部署文档包含图片存储配置说明
5. 通过 `openspec validate --strict` 验证
