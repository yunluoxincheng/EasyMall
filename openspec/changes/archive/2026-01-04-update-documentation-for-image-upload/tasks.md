# 任务列表：更新文档以反映图片上传功能

## 任务概述

本变更涉及文档更新任务，按优先级和依赖关系排序。

---

## 任务 1：更新 README.md 主文档

**优先级**: 高
**预估工作量**: 小
**依赖**: 无

### 子任务

1. **从"待完善功能"中移除图片上传**
   - 删除："商品图片上传（MinIO）"条目
   - 原因：已实现本地文件存储方案，非 MinIO

2. **在技术栈中添加文件上传说明**
   - 位置：## 技术栈 部分
   - 内容：添加"本地文件存储（商品图片、用户头像）"

3. **更新功能模块说明**
   - 位置：### 2. 商品与分类模块
   - 添加："商品图片上传（支持单图/多图上传，文件验证，本地存储）"
   - 位置：### 1. 用户与会员模块
   - 添加："用户头像上传"

4. **更新 API 接口文档链接**
   - 在 ## API接口文档 部分添加图片上传接口
   - 添加对 `docs/image-upload-guide.md` 的引用

5. **更新部署说明**
   - 在 Docker 部署部分添加 uploads 目录配置说明
   - 确保与 docker-compose.yml 的 volume 配置一致

### 验证标准

- [x] README 中不再将图片上传列为"待完善功能"
- [x] 功能描述与实际实现一致
- [x] 包含图片上传功能的简要说明

---

## 任务 2：更新 API 文档

**优先级**: 高
**预估工作量**: 中
**依赖**: 无（可与任务 1 并行）

### 子任务

1. **在 docs/API.md 中添加图片上传接口章节**
   - 新增章节：## 图片上传模块
   - 包含接口：
     - POST /api/upload/image - 单图上传
     - POST /api/upload/images - 多图上传
     - DELETE /api/upload/image - 删除图片

2. **编写接口详细说明**
   - 请求参数表格
   - 响应格式示例
   - 错误码说明
   - 权限要求（删除接口需要 ADMIN）

3. **添加请求示例**
   - cURL 示例
   - JavaScript/Axios 示例

### 验证标准

- [x] 包含所有图片上传相关接口
- [x] 请求/响应示例准确可用
- [x] 错误码说明完整

---

## 任务 3：更新部署文档

**优先级**: 中
**预估工作量**: 中
**依赖**: 无

### 子任务

1. **更新 README.md 中的 Docker 部署部分**
   - 添加 uploads 目录 volume 挂载说明
   - 添加图片存储目录创建命令

2. **验证 docker-compose.yml**
   - 确认 uploads 目录 volume 挂载配置存在

### 验证标准

- [x] 部署步骤包含图片存储配置
- [x] Volume 挂载配置正确

**注意**：docs/deployment-guide.md 和 docs/cloud-deployment.md 已包含 Nginx 配置说明，无需额外更新。

---

## 任务 4：验证现有文档链接

**优先级**: 低
**预估工作量**: 小
**依赖**: 任务 1、2、3

### 子任务

1. **检查文档交叉引用**
   - 确保 README 中的文档链接有效
   - 验证 image-upload-guide.md 引用正确

### 验证标准

- [x] 所有文档链接有效
- [x] 无死链或错误引用

---

## 任务 5：创建 OpenSpec 规范更新

**优先级**: 高
**预估工作量**: 中
**依赖**: 无

### 子任务

1. **创建 specs/readme-documentation/spec.md delta**
   - 定义 README 文档更新要求
   - 添加图片上传功能文档场景

2. **创建 specs/api-documentation/spec.md delta**
   - 定义 API 文档完整性要求
   - 添加图片上传接口文档场景

### 验证标准

- [x] 通过 `openspec validate --strict` 验证
- [x] 规范覆盖所有文档更新场景

---

## 执行顺序

已完成的执行顺序：

1. **任务 1**（README）✅
2. **任务 2**（API 文档）✅
3. **任务 3**（部署文档）✅
4. **任务 4**（验证链接）✅
5. **任务 5**（规范更新）✅

---

## 实施总结

### 已完成的文档更新

1. **README.md**
   - ✅ 从"待完善功能"中移除"商品图片上传（MinIO）"
   - ✅ 在技术栈中添加"文件存储：本地文件系统（商品图片、用户头像）"
   - ✅ 在用户与会员模块添加"用户头像上传"
   - ✅ 在商品与分类模块添加"商品图片上传（支持单图/多图上传，文件类型验证，本地存储）"
   - ✅ 在 API 接口文档部分添加图片上传接口列表
   - ✅ 添加图片上传使用指南链接
   - ✅ 在 Docker 部署部分添加 uploads 目录 volume 挂载说明
   - ✅ 添加图片存储目录创建命令

2. **docs/API.md**
   - ✅ 添加图片上传相关错误码（7个）
   - ✅ 新增"图片上传模块"章节
   - ✅ 编写单图上传接口文档（含请求/响应示例）
   - ✅ 编写多图上传接口文档（含请求/响应示例）
   - ✅ 编写删除图片接口文档（含请求/响应示例）
   - ✅ 添加安全机制说明
   - ✅ 提供 JavaScript/Axios 使用示例

3. **docs/deployment-guide.md 和 docs/cloud-deployment.md**
   - ✅ 已包含 Nginx 配置和图片存储说明（无需额外更新）

### 验证结果

- ✅ README 准确反映已实现功能
- ✅ API 文档完整包含图片上传接口
- ✅ 部署文档包含图片存储配置
- ✅ 所有文档链接有效
- ✅ 通过 OpenSpec 验证

---

## 备注

- 本变更仅涉及文档更新，不修改业务代码
- 所有文档更新与实际实现严格一致
- 文档提供了清晰的使用示例和配置说明
